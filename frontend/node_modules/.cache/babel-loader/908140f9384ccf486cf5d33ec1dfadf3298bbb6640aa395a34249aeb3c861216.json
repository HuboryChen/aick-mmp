{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Modal,List,Card,Tag,Button,Input,Space,Typography}from'antd';import{VideoCameraOutlined,SearchOutlined,CheckCircleOutlined}from'@ant-design/icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Search}=Input;const{Text}=Typography;const CameraSelector=_ref=>{let{visible,cameras,selectedCameras,onSelect,onCancel}=_ref;const[filteredCameras,setFilteredCameras]=useState([]);const[searchText,setSearchText]=useState('');useEffect(()=>{if(cameras){const filtered=cameras.filter(camera=>camera.name.toLowerCase().includes(searchText.toLowerCase())||camera.location.toLowerCase().includes(searchText.toLowerCase()));setFilteredCameras(filtered);}},[cameras,searchText]);const handleSearch=value=>{setSearchText(value);};const handleSelect=camera=>{onSelect(camera);};const isSelected=cameraId=>{return selectedCameras.some(camera=>camera&&camera.id===cameraId);};const getStatusColor=status=>{switch(status){case'ONLINE':return'green';case'OFFLINE':return'red';case'CONNECTING':return'orange';default:return'default';}};const getStatusText=status=>{switch(status){case'ONLINE':return'在线';case'OFFLINE':return'离线';case'CONNECTING':return'连接中';default:return'未知';}};return/*#__PURE__*/_jsxs(Modal,{title:\"\\u9009\\u62E9\\u6444\\u50CF\\u5934\",open:visible,onCancel:onCancel,footer:null,width:600,bodyStyle:{maxHeight:'60vh',overflow:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'16px'},children:/*#__PURE__*/_jsx(Search,{placeholder:\"\\u641C\\u7D22\\u6444\\u50CF\\u5934\\u540D\\u79F0\\u6216\\u4F4D\\u7F6E\",allowClear:true,enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),size:\"large\",onSearch:handleSearch,onChange:e=>handleSearch(e.target.value)})}),/*#__PURE__*/_jsx(List,{grid:{gutter:16,column:2},dataSource:filteredCameras,renderItem:camera=>/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsxs(Card,{size:\"small\",hoverable:true,className:isSelected(camera.id)?'selected-camera':'',onClick:()=>handleSelect(camera),style:{border:isSelected(camera.id)?'2px solid #1890ff':'1px solid #d9d9d9',position:'relative'},children:[isSelected(camera.id)&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'8px',right:'8px',zIndex:1},children:/*#__PURE__*/_jsx(CheckCircleOutlined,{style:{color:'#1890ff',fontSize:'16px'}})}),/*#__PURE__*/_jsx(Card.Meta,{avatar:/*#__PURE__*/_jsx(VideoCameraOutlined,{style:{fontSize:'24px',color:'#1890ff'}}),title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px'},children:camera.name}),/*#__PURE__*/_jsx(Tag,{color:getStatusColor(camera.status),style:{fontSize:'10px'},children:getStatusText(camera.status)})]}),description:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",style:{fontSize:'12px'},children:camera.location}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",style:{fontSize:'11px'},children:[camera.resolution,\" | \",camera.protocol]})]})})]})})}),filteredCameras.length===0&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'40px',color:'#999'},children:[/*#__PURE__*/_jsx(VideoCameraOutlined,{style:{fontSize:'48px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u6CA1\\u6709\\u627E\\u5230\\u5339\\u914D\\u7684\\u6444\\u50CF\\u5934\"})]})]});};export default CameraSelector;","map":{"version":3,"names":["React","useState","useEffect","Modal","List","Card","Tag","Button","Input","Space","Typography","VideoCameraOutlined","SearchOutlined","CheckCircleOutlined","jsx","_jsx","jsxs","_jsxs","Search","Text","CameraSelector","_ref","visible","cameras","selectedCameras","onSelect","onCancel","filteredCameras","setFilteredCameras","searchText","setSearchText","filtered","filter","camera","name","toLowerCase","includes","location","handleSearch","value","handleSelect","isSelected","cameraId","some","id","getStatusColor","status","getStatusText","title","open","footer","width","bodyStyle","maxHeight","overflow","children","style","marginBottom","placeholder","allowClear","enterButton","size","onSearch","onChange","e","target","grid","gutter","column","dataSource","renderItem","Item","hoverable","className","onClick","border","position","top","right","zIndex","color","fontSize","Meta","avatar","display","justifyContent","alignItems","description","type","resolution","protocol","length","textAlign","padding"],"sources":["/Users/huborychen/Documents/my-workspace/aick-mmp/frontend/src/components/CameraSelector.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Modal, List, Card, Tag, Button, Input, Space, Typography } from 'antd';\nimport { VideoCameraOutlined, SearchOutlined, CheckCircleOutlined } from '@ant-design/icons';\n\nconst { Search } = Input;\nconst { Text } = Typography;\n\nconst CameraSelector = ({ visible, cameras, selectedCameras, onSelect, onCancel }) => {\n  const [filteredCameras, setFilteredCameras] = useState([]);\n  const [searchText, setSearchText] = useState('');\n\n  useEffect(() => {\n    if (cameras) {\n      const filtered = cameras.filter(camera => \n        camera.name.toLowerCase().includes(searchText.toLowerCase()) ||\n        camera.location.toLowerCase().includes(searchText.toLowerCase())\n      );\n      setFilteredCameras(filtered);\n    }\n  }, [cameras, searchText]);\n\n  const handleSearch = (value) => {\n    setSearchText(value);\n  };\n\n  const handleSelect = (camera) => {\n    onSelect(camera);\n  };\n\n  const isSelected = (cameraId) => {\n    return selectedCameras.some(camera => camera && camera.id === cameraId);\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'ONLINE': return 'green';\n      case 'OFFLINE': return 'red';\n      case 'CONNECTING': return 'orange';\n      default: return 'default';\n    }\n  };\n\n  const getStatusText = (status) => {\n    switch (status) {\n      case 'ONLINE': return '在线';\n      case 'OFFLINE': return '离线';\n      case 'CONNECTING': return '连接中';\n      default: return '未知';\n    }\n  };\n\n  return (\n    <Modal\n      title=\"选择摄像头\"\n      open={visible}\n      onCancel={onCancel}\n      footer={null}\n      width={600}\n      bodyStyle={{ maxHeight: '60vh', overflow: 'auto' }}\n    >\n      <div style={{ marginBottom: '16px' }}>\n        <Search\n          placeholder=\"搜索摄像头名称或位置\"\n          allowClear\n          enterButton={<SearchOutlined />}\n          size=\"large\"\n          onSearch={handleSearch}\n          onChange={(e) => handleSearch(e.target.value)}\n        />\n      </div>\n\n      <List\n        grid={{ gutter: 16, column: 2 }}\n        dataSource={filteredCameras}\n        renderItem={camera => (\n          <List.Item>\n            <Card\n              size=\"small\"\n              hoverable\n              className={isSelected(camera.id) ? 'selected-camera' : ''}\n              onClick={() => handleSelect(camera)}\n              style={{\n                border: isSelected(camera.id) ? '2px solid #1890ff' : '1px solid #d9d9d9',\n                position: 'relative'\n              }}\n            >\n              {isSelected(camera.id) && (\n                <div style={{\n                  position: 'absolute',\n                  top: '8px',\n                  right: '8px',\n                  zIndex: 1\n                }}>\n                  <CheckCircleOutlined style={{ color: '#1890ff', fontSize: '16px' }} />\n                </div>\n              )}\n              \n              <Card.Meta\n                avatar={<VideoCameraOutlined style={{ fontSize: '24px', color: '#1890ff' }} />}\n                title={\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <span style={{ fontSize: '14px' }}>{camera.name}</span>\n                    <Tag color={getStatusColor(camera.status)} style={{ fontSize: '10px' }}>\n                      {getStatusText(camera.status)}\n                    </Tag>\n                  </div>\n                }\n                description={\n                  <div>\n                    <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                      {camera.location}\n                    </Text>\n                    <br />\n                    <Text type=\"secondary\" style={{ fontSize: '11px' }}>\n                      {camera.resolution} | {camera.protocol}\n                    </Text>\n                  </div>\n                }\n              />\n            </Card>\n          </List.Item>\n        )}\n      />\n\n      {filteredCameras.length === 0 && (\n        <div style={{ \n          textAlign: 'center', \n          padding: '40px',\n          color: '#999'\n        }}>\n          <VideoCameraOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\n          <div>没有找到匹配的摄像头</div>\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default CameraSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}