{"ast":null,"code":"import React,{useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{Layout,theme,Spin,message}from'antd';import{MenuUnfoldOutlined,MenuFoldOutlined,VideoCameraOutlined,HistoryOutlined,SettingOutlined,UserOutlined,BellOutlined,LogoutOutlined}from'@ant-design/icons';import axios from'axios';import Cookies from'js-cookie';import Dashboard from'./pages/Dashboard';import VideoWall from'./pages/VideoWall';import CameraManagement from'./pages/CameraManagement';import EdgeNodeManagement from'./pages/EdgeNodeManagement';import Playback from'./pages/Playback';import SystemSettings from'./pages/SystemSettings';import UserProfile from'./pages/UserProfile';import Login from'./pages/Login';import PrivateRoute from'./components/PrivateRoute';import Sidebar from'./components/Sidebar';import Header from'./components/Header';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Content}=Layout;const App=()=>{const[collapsed,setCollapsed]=useState(false);const[loading,setLoading]=useState(false);const[userInfo,setUserInfo]=useState(null);const[notifications,setNotifications]=useState([]);const{token:{colorBgContainer,borderRadiusLG}}=theme.useToken();// Check if user is logged in\nReact.useEffect(()=>{const checkAuth=async()=>{const token=Cookies.get('token');if(token){try{setLoading(true);const response=await axios.get('/api/auth/me',{headers:{Authorization:\"Bearer \".concat(token)}});setUserInfo(response.data);}catch(error){message.error('Session expired, please login again');Cookies.remove('token');}finally{setLoading(false);}}};checkAuth();},[]);const toggle=()=>{setCollapsed(!collapsed);};const handleLogout=()=>{Cookies.remove('token');setUserInfo(null);message.success('Logged out successfully');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(Spin,{size:\"large\"})});}return/*#__PURE__*/_jsx(Router,{children:userInfo?/*#__PURE__*/_jsxs(Layout,{style:{minHeight:'100vh'},children:[/*#__PURE__*/_jsx(Sidebar,{collapsed:collapsed}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Header,{collapsed:collapsed,toggle:toggle,userInfo:userInfo,notifications:notifications,onLogout:handleLogout}),/*#__PURE__*/_jsx(Content,{style:{margin:'24px 16px',padding:24,minHeight:280,background:colorBgContainer,borderRadius:borderRadiusLG},children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/video-wall\",element:/*#__PURE__*/_jsx(VideoWall,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cameras\",element:/*#__PURE__*/_jsx(CameraManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edge-nodes\",element:/*#__PURE__*/_jsx(EdgeNodeManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"/playback\",element:/*#__PURE__*/_jsx(Playback,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(SystemSettings,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(UserProfile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})})]})})]})]}):/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUserInfo:setUserInfo})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})});};export default App;","map":{"version":3,"names":["React","useState","BrowserRouter","Router","Routes","Route","Navigate","Layout","theme","Spin","message","MenuUnfoldOutlined","MenuFoldOutlined","VideoCameraOutlined","HistoryOutlined","SettingOutlined","UserOutlined","BellOutlined","LogoutOutlined","axios","Cookies","Dashboard","VideoWall","CameraManagement","EdgeNodeManagement","Playback","SystemSettings","UserProfile","Login","PrivateRoute","Sidebar","Header","jsx","_jsx","jsxs","_jsxs","Content","App","collapsed","setCollapsed","loading","setLoading","userInfo","setUserInfo","notifications","setNotifications","token","colorBgContainer","borderRadiusLG","useToken","useEffect","checkAuth","get","response","headers","Authorization","concat","data","error","remove","toggle","handleLogout","success","className","children","size","style","minHeight","onLogout","margin","padding","background","borderRadius","path","element","to"],"sources":["/Users/huborychen/Documents/my-workspace/aick-mmp/frontend/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { Layout, theme, Spin, message } from 'antd';\nimport {\n  MenuUnfoldOutlined,\n  MenuFoldOutlined,\n  VideoCameraOutlined,\n  HistoryOutlined,\n  SettingOutlined,\n  UserOutlined,\n  BellOutlined,\n  LogoutOutlined\n} from '@ant-design/icons';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport Dashboard from './pages/Dashboard';\nimport VideoWall from './pages/VideoWall';\nimport CameraManagement from './pages/CameraManagement';\nimport EdgeNodeManagement from './pages/EdgeNodeManagement';\nimport Playback from './pages/Playback';\nimport SystemSettings from './pages/SystemSettings';\nimport UserProfile from './pages/UserProfile';\nimport Login from './pages/Login';\nimport PrivateRoute from './components/PrivateRoute';\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\nimport './App.css';\n\nconst { Content } = Layout;\n\nconst App = () => {\n  const [collapsed, setCollapsed] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [userInfo, setUserInfo] = useState(null);\n  const [notifications, setNotifications] = useState([]);\n\n  const { token: { colorBgContainer, borderRadiusLG } } = theme.useToken();\n\n  // Check if user is logged in\n  React.useEffect(() => {\n    const checkAuth = async () => {\n      const token = Cookies.get('token');\n      if (token) {\n        try {\n          setLoading(true);\n          const response = await axios.get('/api/auth/me', {\n            headers: { Authorization: `Bearer ${token}` }\n          });\n          setUserInfo(response.data);\n        } catch (error) {\n          message.error('Session expired, please login again');\n          Cookies.remove('token');\n        } finally {\n          setLoading(false);\n        }\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const toggle = () => {\n    setCollapsed(!collapsed);\n  };\n\n  const handleLogout = () => {\n    Cookies.remove('token');\n    setUserInfo(null);\n    message.success('Logged out successfully');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Spin size=\"large\" />\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      {userInfo ? (\n        <Layout style={{ minHeight: '100vh' }}>\n          <Sidebar collapsed={collapsed} />\n          <Layout>\n            <Header\n              collapsed={collapsed}\n              toggle={toggle}\n              userInfo={userInfo}\n              notifications={notifications}\n              onLogout={handleLogout}\n            />\n            <Content\n              style={{\n                margin: '24px 16px',\n                padding: 24,\n                minHeight: 280,\n                background: colorBgContainer,\n                borderRadius: borderRadiusLG,\n              }}\n            >\n              <Routes>\n                <Route path=\"/dashboard\" element={<Dashboard />} />\n                <Route path=\"/video-wall\" element={<VideoWall />} />\n                <Route path=\"/cameras\" element={<CameraManagement />} />\n                <Route path=\"/edge-nodes\" element={<EdgeNodeManagement />} />\n                <Route path=\"/playback\" element={<Playback />} />\n                <Route path=\"/settings\" element={<SystemSettings />} />\n                <Route path=\"/profile\" element={<UserProfile />} />\n                <Route path=\"/\" element={<Navigate to=\"/dashboard\" />} />\n              </Routes>\n            </Content>\n          </Layout>\n        </Layout>\n      ) : (\n        <Routes>\n          <Route path=\"/login\" element={<Login setUserInfo={setUserInfo} />} />\n          <Route path=\"/*\" element={<Navigate to=\"/login\" />} />\n        </Routes>\n      )}\n    </Router>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}